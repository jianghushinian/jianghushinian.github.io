<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>ä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³ | æ±Ÿæ¹–åå¹´ | å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ã€‚</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Go,ç¿»è¯‘">
    <meta name="description" content="æœ¬æ–‡ç¿»è¯‘è‡ªï¼šWhatâ€™s false sharing and how to solve it (using Golang as example)  è¯‘æ–‡åœ¨è§£é‡Šä¼ªå…±äº«ï¼ˆfalse sharingï¼‰ä¹‹å‰ï¼Œæœ‰å¿…è¦ç®€è¦ä»‹ç»ä¸€ä¸‹ CPU æ¶æ„ä¸­ç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ CPU ç¼“å­˜ä¸­çš„æœ€å°å•ä½æ˜¯ç¼“å­˜è¡Œï¼ˆcache lineï¼‰ï¼ˆå¦‚ä»Šï¼ŒCPU ä¸­å¸¸è§çš„ç¼“å­˜è¡Œå¤§å°ä¸º 64 å­—èŠ‚ï¼‰ã€‚å› æ­¤ï¼Œå½“ CPU ä»å†…å­˜è¯»å–ä¸€ä¸ªå˜é‡">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³">
<meta property="og:url" content="http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/index.html">
<meta property="og:site_name" content="æ±Ÿæ¹–åå¹´">
<meta property="og:description" content="æœ¬æ–‡ç¿»è¯‘è‡ªï¼šWhatâ€™s false sharing and how to solve it (using Golang as example)  è¯‘æ–‡åœ¨è§£é‡Šä¼ªå…±äº«ï¼ˆfalse sharingï¼‰ä¹‹å‰ï¼Œæœ‰å¿…è¦ç®€è¦ä»‹ç»ä¸€ä¸‹ CPU æ¶æ„ä¸­ç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ CPU ç¼“å­˜ä¸­çš„æœ€å°å•ä½æ˜¯ç¼“å­˜è¡Œï¼ˆcache lineï¼‰ï¼ˆå¦‚ä»Šï¼ŒCPU ä¸­å¸¸è§çš„ç¼“å­˜è¡Œå¤§å°ä¸º 64 å­—èŠ‚ï¼‰ã€‚å› æ­¤ï¼Œå½“ CPU ä»å†…å­˜è¯»å–ä¸€ä¸ªå˜é‡">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/figure1.png">
<meta property="og:image" content="http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/figure2.png">
<meta property="og:image" content="http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/figure3.png">
<meta property="og:image" content="http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/figure4.png">
<meta property="article:published_time" content="2024-07-04T03:04:34.000Z">
<meta property="article:modified_time" content="2025-02-15T01:45:13.272Z">
<meta property="article:author" content="æ±Ÿæ¹–åå¹´">
<meta property="article:tag" content="Go">
<meta property="article:tag" content="ç¿»è¯‘">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/figure1.png">
    
        <link rel="alternate" type="application/atom+xml" title="æ±Ÿæ¹–åå¹´" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">æ±Ÿæ¹–åå¹´</h5>
          <a href="mailto:jianghushinian007@outlook.com" title="jianghushinian007@outlook.com" class="mail">jianghushinian007@outlook.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                ä¸»é¡µ
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                å½’æ¡£
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                æ ‡ç­¾
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                åˆ†ç±»
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-link"></i>
                å…³äº
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/jianghushinian" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">ä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="è¾“å…¥æ„Ÿå…´è¶£çš„å…³é”®å­—">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">ä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³</h1>
        <h5 class="subtitle">
            
                <time datetime="2024-07-04T03:04:34.000Z" itemprop="datePublished" class="page-time">
  2024-07-04
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Go/">Go</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#è¯‘æ–‡"><span class="post-toc-number">1.</span> <span class="post-toc-text">è¯‘æ–‡</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#P-S"><span class="post-toc-number">2.</span> <span class="post-toc-text">P.S.</span></a></li></ol>
        </nav>
    </aside>


<article id="post-whatâ€™s-false-sharing-and-how-to-solve-it-using-golang-as-example"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">ä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³</h1>
        <div class="post-meta">
            <time class="post-time" title="2024-07-04 11:04:34" datetime="2024-07-04T03:04:34.000Z"  itemprop="datePublished">2024-07-04</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Go/">Go</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="æ–‡ç« æ€»é˜…è¯»é‡" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p>æœ¬æ–‡ç¿»è¯‘è‡ªï¼š<a href="https://medium.com/@genchilu/whats-false-sharing-and-how-to-solve-it-using-golang-as-example-ef978a305e10" target="_blank" rel="noopener">Whatâ€™s false sharing and how to solve it (using Golang as example)</a></p>
</blockquote>
<h3 id="è¯‘æ–‡"><a href="#è¯‘æ–‡" class="headerlink" title="è¯‘æ–‡"></a>è¯‘æ–‡</h3><p>åœ¨è§£é‡Š<strong>ä¼ªå…±äº«ï¼ˆfalse sharingï¼‰</strong>ä¹‹å‰ï¼Œæœ‰å¿…è¦ç®€è¦ä»‹ç»ä¸€ä¸‹ CPU æ¶æ„ä¸­ç¼“å­˜æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p>CPU ç¼“å­˜ä¸­çš„æœ€å°å•ä½æ˜¯<strong>ç¼“å­˜è¡Œï¼ˆcache lineï¼‰</strong>ï¼ˆå¦‚ä»Šï¼ŒCPU ä¸­å¸¸è§çš„ç¼“å­˜è¡Œå¤§å°ä¸º 64 å­—èŠ‚ï¼‰ã€‚å› æ­¤ï¼Œå½“ CPU ä»å†…å­˜è¯»å–ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¼šåŒæ—¶è¯»å–è¯¥å˜é‡é™„è¿‘çš„æ‰€æœ‰å˜é‡ã€‚å›¾ 1 æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="figure1.png" alt="å›¾ 1" title="">
                </div>
                <div class="image-caption">å›¾ 1</div>
            </figure>

<p>å½“ <code>core1</code> ä»å†…å­˜è¯»å–å˜é‡ <code>a</code> æ—¶ï¼Œå®ƒä¼šåŒæ—¶å°†å˜é‡ <code>b</code> è¯»å…¥ç¼“å­˜ã€‚ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘è®¤ä¸º CPU ä»å†…å­˜æ‰¹é‡è¯»å–å˜é‡çš„ä¸»è¦åŸå› æ˜¯åŸºäº<strong>ç©ºé—´å±€éƒ¨æ€§ç†è®º</strong>ï¼šå½“ CPU è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒå¯èƒ½å¾ˆå¿«å°±ä¼šè¯»å–æ—è¾¹çš„å˜é‡ã€‚ï¼‰</p>
<p>è¿™ç§ç¼“å­˜æ¶æ„å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä¸€ä¸ªå˜é‡åƒå›¾ 2 é‚£æ ·å­˜åœ¨äºä¸åŒ CPU æ ¸å¿ƒçš„ä¸¤ä¸ªç¼“å­˜è¡Œä¸­ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="figure2.png" alt="å›¾ 2" title="">
                </div>
                <div class="image-caption">å›¾ 2</div>
            </figure>

<p>å½“ <code>core1</code> æ›´æ–°å˜é‡ <code>a</code> æ—¶ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="figure3.png" alt="å›¾ 3" title="">
                </div>
                <div class="image-caption">å›¾ 3</div>
            </figure>

<p>å³ä½¿å˜é‡ <code>b</code> æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå®ƒä¹Ÿä¼šå¯¼è‡´ <code>core2</code> çš„ç¼“å­˜å¤±æ•ˆï¼Œå› æ­¤ <code>core2</code> å°†é‡æ–°åŠ è½½ç¼“å­˜è¡Œä¸­çš„æ‰€æœ‰å˜é‡ï¼Œå¦‚å›¾ 4 æ‰€ç¤ºï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="figure4.png" alt="å›¾ 4" title="">
                </div>
                <div class="image-caption">å›¾ 4</div>
            </figure>

<p>è¿™å°±æ˜¯æ‰€è°“çš„<strong>ä¼ªå…±äº«</strong>ï¼šä¸€ä¸ªæ ¸å¿ƒæ›´æ–°ä¸€ä¸ªå˜é‡ä¼šè¿«ä½¿å…¶ä»–æ ¸å¿ƒä¹Ÿæ›´æ–°ç¼“å­˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒCPU ä»ç¼“å­˜è¯»å–å˜é‡æ¯”ä»å†…å­˜è¯»å–è¦å¿«å¾—å¤šã€‚å› æ­¤ï¼Œå½“è¿™ä¸ªå˜é‡æ€»æ˜¯å­˜åœ¨äºå¤šæ ¸ä¸­æ—¶ï¼Œè¿™å°†æ˜¾è‘—å½±å“æ€§èƒ½ã€‚</p>
<p>è§£å†³è¿™ä¸ªé—®é¢˜çš„å¸¸è§æ–¹æ³•æ˜¯<strong>ç¼“å­˜å¡«å……ï¼ˆcache paddingï¼‰</strong>ï¼šåœ¨å˜é‡ä¹‹é—´å¡«å……ä¸€äº›æ— æ„ä¹‰çš„å˜é‡ã€‚è¿™å°†è¿«ä½¿ä¸€ä¸ªå˜é‡å•ç‹¬å ç”¨ä¸€ä¸ªæ ¸å¿ƒçš„ç¼“å­˜è¡Œï¼Œæ‰€ä»¥å½“å…¶ä»–æ ¸å¿ƒæ›´æ–°ç¼“å­˜å˜é‡æ—¶ï¼Œä¸ä¼šä½¿è¯¥æ ¸å¿ƒä»å†…å­˜ä¸­é‡æ–°åŠ è½½å˜é‡ã€‚</p>
<p>è®©æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ Go ä»£ç ç‰‡æ®µç®€è¦ä»‹ç»è¿™ä¸ªä¼ªå…±äº«çš„æ¦‚å¿µã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªåŒ…å« 3 ä¸ª <code>uint64</code> çš„ Go ç»“æ„ä½“ï¼Œ</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> NoPad <span class="keyword">struct</span> &#123;</span><br><span class="line">	a <span class="keyword">uint64</span></span><br><span class="line">	b <span class="keyword">uint64</span></span><br><span class="line">	c <span class="keyword">uint64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(myatomic *NoPad)</span> <span class="title">IncreaseAllEles</span><span class="params">()</span></span> &#123;</span><br><span class="line">	atomic.AddUint64(&amp;myatomic.a, <span class="number">1</span>)</span><br><span class="line">	atomic.AddUint64(&amp;myatomic.b, <span class="number">1</span>)</span><br><span class="line">	atomic.AddUint64(&amp;myatomic.c, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰å¦ä¸€ä¸ªæˆ‘åœ¨å˜é‡ä¹‹é—´æ·»åŠ äº† <code>[8]uint64</code> ä»¥è¿›è¡Œå¡«å……çš„ç»“æ„ä½“ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Pad <span class="keyword">struct</span> &#123;</span><br><span class="line">	a   <span class="keyword">uint64</span></span><br><span class="line">	_p1 [<span class="number">8</span>]<span class="keyword">uint64</span></span><br><span class="line">	b   <span class="keyword">uint64</span></span><br><span class="line">	_p2 [<span class="number">8</span>]<span class="keyword">uint64</span></span><br><span class="line">	c   <span class="keyword">uint64</span></span><br><span class="line">	_p3 [<span class="number">8</span>]<span class="keyword">uint64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(myatomic *Pad)</span> <span class="title">IncreaseAllEles</span><span class="params">()</span></span> &#123;</span><br><span class="line">	atomic.AddUint64(&amp;myatomic.a, <span class="number">1</span>)</span><br><span class="line">	atomic.AddUint64(&amp;myatomic.b, <span class="number">1</span>)</span><br><span class="line">	atomic.AddUint64(&amp;myatomic.c, <span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„ä»£ç æ¥è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testAtomicIncrease</span><span class="params">(myatomic MyAtomic)</span></span> &#123;</span><br><span class="line">	paraNum := <span class="number">1000</span></span><br><span class="line">	addTimes := <span class="number">1000</span></span><br><span class="line">	<span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">	wg.Add(paraNum)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; paraNum; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">			<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; addTimes; j++ &#123;</span><br><span class="line">				myatomic.IncreaseAllEles()</span><br><span class="line">			&#125;</span><br><span class="line">			wg.Done()</span><br><span class="line">		&#125;()</span><br><span class="line">	&#125;</span><br><span class="line">	wg.Wait()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkNoPad</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">	myatomic := &amp;NoPad&#123;&#125;</span><br><span class="line">	b.ResetTimer()</span><br><span class="line">	testAtomicIncrease(myatomic)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkPad</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">	myatomic := &amp;Pad&#123;&#125;</span><br><span class="line">	b.ResetTimer()</span><br><span class="line">	testAtomicIncrease(myatomic)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ 2014 å¹´çš„ MBA ä¸Šè¿è¡Œçš„åŸºå‡†æµ‹è¯•å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$&gt; go <span class="built_in">test</span> -bench=.</span><br><span class="line">BenchmarkNoPad-4 2000000000 0.07 ns/op</span><br><span class="line">BenchmarkPad-4 2000000000 0.02 ns/op</span><br><span class="line">PASS</span><br><span class="line">ok 1.777s</span><br></pre></td></tr></table></figure>

<p>åŸºå‡†æµ‹è¯•çš„ç»“æœæ˜¾ç¤ºï¼Œæ€§èƒ½ä» <code>0.07 ns/op</code> æé«˜åˆ°äº† <code>0.02 ns/op</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ”¹è¿›ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä»–è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­æµ‹è¯•è¿™ä¸€ç‚¹ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚</p>
<p>åœ¨ä½ å°†å…¶åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œä½ åº”è¯¥äº†è§£ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li>ç¡®ä¿äº†è§£ä½ ç³»ç»Ÿä¸­ CPU çš„ç¼“å­˜è¡Œå¤§å°ï¼šè¿™ä¸ä½ ä½¿ç”¨çš„ç¼“å­˜å¡«å……å¤§å°æœ‰å…³ã€‚</li>
<li>å¡«å……æ›´å¤šå˜é‡æ„å‘³ç€ä½ å°†æ¶ˆè€—æ›´å¤šçš„å†…å­˜èµ„æºã€‚è¿è¡ŒåŸºå‡†æµ‹è¯•å¹¶ç¡®ä¿ä½ çš„æŠ•å…¥æ˜¯å€¼å¾—çš„ã€‚</li>
</ol>
<p>æˆ‘æ‰€æœ‰çš„ç¤ºä¾‹ä»£ç éƒ½åœ¨ <a href="https://github.com/genchilu/concurrencyPractice/tree/master/golang/pad" target="_blank" rel="noopener">GitHub</a> ä¸Šã€‚</p>
<h3 id="P-S"><a href="#P-S" class="headerlink" title="P.S."></a>P.S.</h3><p>ä¹‹æ‰€ä»¥é€‰æ‹©ç¿»è¯‘æ­¤æ–‡ï¼Œæ˜¯å› ä¸ºæˆ‘æ­£åœ¨å†™å…³äº Go ç»“æ„ä½“å†…å­˜å¯¹é½çš„æ–‡ç« ï¼Œéœ€è¦ä»‹ç»ã€Œä¼ªå…±äº«ã€è¿™ä¸ªæ¦‚å¿µï¼Œå—é™äºç¯‡å¹…æ‰€é™ï¼Œå°±å†³å®šé’ˆå¯¹ä¼ªå…±äº«è¿™ä¸ªæ¦‚å¿µå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« ã€‚æˆ‘åœ¨æŸ¥é˜…èµ„æ–™è¿‡ç¨‹ä¸­å‘ç°æ­¤æ–‡è®²è§£æµ…æ˜¾æ˜“æ‡‚ï¼Œäºæ˜¯æƒ³ç€æŠŠæ­¤æ–‡ç¿»è¯‘ä¸‹å…±è¯»è€…æŸ¥é˜…ã€‚</p>
<p>ä¸è¿‡è™½ç„¶è¿™ç¯‡æ–‡ç« æ€è·¯æ¸…æ™°æ˜“æ‡‚ï¼Œä½†ä½œè€…æä¾›çš„åŸºå‡†æµ‹è¯•ä»£ç å¹¶ä¸å¤Ÿä¸¥è°¨ï¼Œæˆ‘åœ¨ 2022 æ¬¾ M2 èŠ¯ç‰‡çš„ MBA ä¸Šæµ‹è¯•å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -bench=. -v</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: arm64</span><br><span class="line">pkg: <span class="literal">false</span>-sharing</span><br><span class="line">BenchmarkNoPad</span><br><span class="line">BenchmarkNoPad-8        1000000000               0.09618 ns/op</span><br><span class="line">BenchmarkPad</span><br><span class="line">BenchmarkPad-8          1000000000               0.1065 ns/op</span><br><span class="line">PASS</span><br><span class="line">ok      <span class="literal">false</span>-sharing      2.368s</span><br></pre></td></tr></table></figure>

<p>è·Ÿä½œè€…çš„ç»“æœå®Œå…¨ç›¸åï¼Œå“ˆå“ˆğŸ˜„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„åŸºå‡†æµ‹è¯•æ¥éªŒè¯ä½¿ç”¨ <code>cache padding</code> æ¥è§£å†³ <code>false sharing</code> çš„æ•ˆæœï¼š</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"sync/atomic"</span></span><br><span class="line">	<span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkPadding</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">	b.Run(<span class="string">"without_padding"</span>, <span class="function"><span class="keyword">func</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">		nums := [<span class="number">128</span>]atomic.Int64&#123;&#125;</span><br><span class="line">		i := atomic.Int64&#123;&#125;</span><br><span class="line">		b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">			id := i.Add(<span class="number">1</span>)</span><br><span class="line">			<span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">				nums[id].Add(<span class="number">1</span>)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	b.Run(<span class="string">"with_padding"</span>, <span class="function"><span class="keyword">func</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">		<span class="keyword">type</span> pad <span class="keyword">struct</span> &#123;</span><br><span class="line">			val atomic.Int64</span><br><span class="line">			_   [<span class="number">8</span>]<span class="keyword">uint64</span></span><br><span class="line">		&#125;</span><br><span class="line">		nums := [<span class="number">128</span>]pad&#123;&#125;</span><br><span class="line">		i := atomic.Int64&#123;&#125;</span><br><span class="line">		b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">			id := i.Add(<span class="number">1</span>)</span><br><span class="line">			<span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">				nums[id].val.Add(<span class="number">1</span>)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>without_padding</code> åœºæ™¯ä¸­ï¼Œç”±äº <code>nums</code> æ•°ç»„çš„å…ƒç´ å¯èƒ½å…±äº«ç›¸åŒçš„ç¼“å­˜è¡Œï¼Œå¤šä¸ª <code>goroutine</code> åŒæ—¶ä¿®æ”¹ç›¸é‚»å…ƒç´ æ—¶ä¼šå¯¼è‡´ç¼“å­˜è¡Œå¤±æ•ˆï¼Œä»è€Œé™ä½æ€§èƒ½ã€‚</p>
<p>è€Œåœ¨ <code>with_padding</code> åœºæ™¯ä¸­ï¼Œé€šè¿‡åœ¨é«˜é¢‘è®¿é—®çš„å˜é‡ä¹‹é—´åŠ å…¥ç¼“å­˜å¡«å…… <code>_ [8]uint64</code>ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ éƒ½å æ®ç‹¬ç«‹çš„ç¼“å­˜è¡Œï¼Œå‡å°‘äº†è¿™ç§ç¼“å­˜è¡Œçš„å¤±æ•ˆæƒ…å†µï¼Œé¢„æœŸèƒ½è§‚å¯Ÿåˆ°æ€§èƒ½çš„æå‡ã€‚</p>
<p>æ‰§è¡ŒåŸºå‡†æµ‹è¯•ä»£ç ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">test</span> -bench=. -v</span><br><span class="line">goos: darwin</span><br><span class="line">goarch: arm64</span><br><span class="line">pkg: <span class="literal">false</span>-sharing</span><br><span class="line">BenchmarkPadding</span><br><span class="line">BenchmarkPadding/without_padding</span><br><span class="line">BenchmarkPadding/without_padding-8              55441728                22.09 ns/op</span><br><span class="line">BenchmarkPadding/with_padding</span><br><span class="line">BenchmarkPadding/with_padding-8                 1000000000               1.075 ns/op</span><br><span class="line">PASS</span><br><span class="line">ok      <span class="literal">false</span>-sharing      4.255s</span><br></pre></td></tr></table></figure>

<p>åŸºå‡†æµ‹è¯•çš„ç»“æœæ˜¾ç¤ºï¼Œæ€§èƒ½ä» <code>22.09 ns/op</code> æé«˜åˆ°äº† <code>1.075 ns/op</code>ã€‚</p>
<p>è¿™æ®µä»£ç ç”±åŸæ–‡è¯„è®ºåŒºæä¾›ï¼Œä½ å¯ä»¥è‡ªè¡Œå°è¯•éªŒè¯ã€‚</p>
<p><strong>å»¶ä¼¸é˜…è¯»</strong></p>
<ul>
<li>åŸæ–‡åœ°å€: <a href="https://medium.com/@genchilu/whats-false-sharing-and-how-to-solve-it-using-golang-as-example-ef978a305e10" target="_blank" rel="noopener">https://medium.com/@genchilu/whats-false-sharing-and-how-to-solve-it-using-golang-as-example-ef978a305e10</a></li>
</ul>
<p><strong>è”ç³»æˆ‘</strong></p>
<ul>
<li>å…¬ä¼—å·ï¼š<a href="https://jianghushinian.cn/about" target="_blank" rel="noopener">Goç¼–ç¨‹ä¸–ç•Œ</a></li>
<li>å¾®ä¿¡ï¼šjianghushinian</li>
<li>é‚®ç®±ï¼š<a href="mailto:jianghushinian007@outlook.com">jianghushinian007@outlook.com</a></li>
<li>åšå®¢ï¼š<a href="https://jianghushinian.cn" target="_blank" rel="noopener">https://jianghushinian.cn</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    æœ€åæ›´æ–°æ—¶é—´ï¼š<time datetime="2025-02-15T01:45:13.272Z" itemprop="dateUpdated">2025-02-15 09:45:13</time>
</span><br>


        
        <a href="/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/" target="_blank" rel="external">http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/</a>
        
    </div>
    
    <footer>
        <a href="http://www.jianghushinian.cn">
            <img src="/img/avatar.png" alt="æ±Ÿæ¹–åå¹´">
            æ±Ÿæ¹–åå¹´
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/" rel="tag">Go</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BF%BB%E8%AF%91/" rel="tag">ç¿»è¯‘</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/&title=ã€Šä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³ã€‹ â€” æ±Ÿæ¹–åå¹´&pic=http://www.jianghushinian.cn/img/avatar.png" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/&title=ã€Šä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³ã€‹ â€” æ±Ÿæ¹–åå¹´&source=äº’è”ç½‘äº§å“æŠ€æœ¯ç ”ç©¶ï¼Œè½¯ä»¶å¼€å‘" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³ã€‹ â€” æ±Ÿæ¹–åå¹´&url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/&via=http://www.jianghushinian.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2024/07/07/do-you-understand-the-memory-alignment-of-structs-in-the-go/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Go è¯­è¨€ä¸­çš„ç»“æ„ä½“å†…å­˜å¯¹é½ä½ äº†è§£å—ï¼Ÿ</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2024/06/27/how-to-check-for-an-empty-struct-in-go/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">åœ¨ Go ä¸­å¦‚ä½•æ£€æŸ¥ç»“æ„ä½“æ˜¯å¦ä¸ºç©º</h4>
      </a>
    </div>
  
</nav>



    


    <script src="/js/md5.min.js"></script>
    <section class="comments" id="comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = 'https-jianghushinian-cn';
            var disqus_identifier = location.pathname.slice(1,);
            var disqus_url = 'https://jianghushinian.cn/' + disqus_identifier;
            (function () {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the comments.</noscript>
    </section>


















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        <span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        <span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>åšå®¢å†…å®¹éµå¾ª <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">çŸ¥è¯†å…±äº« ç½²å - éå•†ä¸šæ€§ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…åè®®</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>æ±Ÿæ¹–åå¹´ &copy; 2019 - 2026</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/&title=ã€Šä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³ã€‹ â€” æ±Ÿæ¹–åå¹´&pic=http://www.jianghushinian.cn/img/avatar.png" data-title="å¾®åš">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="å¾®ä¿¡">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/&title=ã€Šä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³ã€‹ â€” æ±Ÿæ¹–åå¹´&source=äº’è”ç½‘äº§å“æŠ€æœ¯ç ”ç©¶ï¼Œè½¯ä»¶å¼€å‘" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=ã€Šä»¥ Go è¯­è¨€ä¸ºä¾‹è§£é‡Šä»€ä¹ˆæ˜¯ä¼ªå…±äº«ä»¥åŠå¦‚ä½•è§£å†³ã€‹ â€” æ±Ÿæ¹–åå¹´&url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/&via=http://www.jianghushinian.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>æ‰«ä¸€æ‰«ï¼Œåˆ†äº«åˆ°å¾®ä¿¡</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=http://www.jianghushinian.cn/2024/07/04/what%E2%80%99s-false-sharing-and-how-to-solve-it-using-golang-as-example/" alt="å¾®ä¿¡åˆ†äº«äºŒç»´ç ">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
