---
title: 'ç”¨ Go è¯­è¨€è¿˜åŸ 2025 åˆ˜è°¦æ˜¥æ™šé­”æœ¯ï¼'
date: 2025-01-30 07:37:39
tags:
- Go
- é­”æœ¯
categories:
- Go
---

![é­”æœ¯æˆªå›¾](magic1.png)

å»å¹´å¤§å¹´åˆäºŒï¼Œæˆ‘å†™äº†ä¸€ç¯‡æ–‡ç« ã€Œ[ç”¨ Go è¯­è¨€å®ç°åˆ˜è°¦ 2024 æ˜¥æ™šé­”æœ¯ï¼Œè¿˜åŸå°¼æ ¼ä¹°ææ±—æµæµƒèƒŒçš„å°´å°¬ç¬é—´!](https://jianghushinian.cn/2024/02/10/use-go-to-realize-liu-qian-s-2024-spring-festival-gala-magic/)ã€ï¼Œé‡Œé¢æ­ç§˜äº†å°å°¼é­”æœ¯å¤±è´¥çš„åŸå› ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å…¬ä¼—å·çš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚

ä»Šå¤©åˆšå¥½ä¹Ÿæ˜¯å¤§å¹´åˆäºŒï¼Œæˆ‘å†å¸¦å¤§å®¶ç”¨ Go è¯­è¨€è¿˜åŸä¸€ä¸‹åˆ˜è°¦åœ¨è›‡å¹´æ˜¥æ™šä¸Šçš„é­”æœ¯ã€‚

<!-- more -->

å…ˆåä¸ªæ§½ï¼Œç›¸æ¯”å»å¹´çš„é­”æœ¯ï¼Œä»Šå¹´çš„é­”æœ¯æ˜¯ä¸æ˜¯æœ‰ç‚¹ã€Œé™æœ¬å¢æ•ˆã€äº† :)ã€‚æˆ‘çœ‹æœ‰äººæåˆ°ä»Šå¹´çš„é­”æœ¯ç±»ä¼¼å†’æ³¡æ’åº...è¿™ä¸ªå±å®æœ‰äº¿ç‚¹ğŸ¤å¤¸å¼ äº†<font style="color:rgb(33, 33, 33);"> </font><font style="color:rgb(33, 33, 33);">ğŸ˜…</font>ã€‚

æ²¡ä»€ä¹ˆæ•°å­¦åŸç†ï¼Œä¹Ÿä»€ä¹ˆç®—æ³•å…¬å¼ï¼Œå’±ä»¬å°±æœ€ç®€å•ç›´æ¥çš„ä½¿ç”¨æš´åŠ›æ±‚è§£æ³•ï¼Œæ¥ç©·ä¸¾ä¸€ä¸‹æ‰€æœ‰å¯èƒ½æƒ…å†µï¼Œè¿™ä¹Ÿæ­£æ˜¯ç¨‹åºä»£ç çš„å¼ºé¡¹æ‰€åœ¨ã€‚

### æ’åˆ—ç»„åˆ

åªæœ‰ç­·å­ğŸ¥¢ã€æ¯å­ğŸºã€å‹ºå­ğŸ¥„ä¸‰æ ·ä¸œè¥¿ï¼Œæ‰€æœ‰æ’åˆ—ç»„åˆä¹Ÿä»…ä»…åªæœ‰ 6 ç§æƒ…å†µã€‚

ç»™å®šè¿™ä¸‰ç§ç‰©å“ï¼Œä½¿ç”¨ Go ä»£ç æ±‚å‡ºæ‰€æœ‰æ’åˆ—ç»„åˆå¦‚ä¸‹ï¼š

```go
package main

import "fmt"

// ç”Ÿæˆæ‰€æœ‰æ’åˆ—ç»„åˆ
func permute(items []string, start int) {
	if start == len(items) {
		// å½“æ’åˆ—å®Œæˆæ—¶ï¼Œè¾“å‡ºå½“å‰çš„æ’åˆ—
		fmt.Println(items)
		return
	}

	for i := start; i < len(items); i++ {
		// äº¤æ¢ä½ç½®
		items[start], items[i] = items[i], items[start]
		// é€’å½’è°ƒç”¨
		permute(items, start+1)
		// äº¤æ¢å›åŸæ¥çš„ä½ç½®ï¼Œå›æº¯
		items[start], items[i] = items[i], items[start]
	}
}

func main() {
	items := []string{"ç­·å­ğŸ¥¢", "æ¯å­ğŸº", "å‹ºå­ğŸ¥„"}
	permute(items, 0)
}
```

æ‰§è¡Œç¤ºä¾‹ä»£ç ï¼Œå¾—åˆ°è¾“å‡ºå¦‚ä¸‹ï¼š

```bash
$ go run main.go 
[ç­·å­ğŸ¥¢ æ¯å­ğŸº å‹ºå­ğŸ¥„]
[ç­·å­ğŸ¥¢ å‹ºå­ğŸ¥„ æ¯å­ğŸº]
[æ¯å­ğŸº ç­·å­ğŸ¥¢ å‹ºå­ğŸ¥„]
[æ¯å­ğŸº å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢]
[å‹ºå­ğŸ¥„ æ¯å­ğŸº ç­·å­ğŸ¥¢]
[å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢ æ¯å­ğŸº]
```

è¿™å‡ ç§ç»„åˆå…¶å®å¿ƒç®—ä¹Ÿèƒ½å¾ˆå¿«æ±‚å‡ºæ¥ã€‚

### é­”æœ¯å®ç°

æ¥ç€ï¼Œå’±ä»¬æ‹ä¸€ä¸‹åˆ˜è°¦è¿™ä¸ªé­”æœ¯çš„ä¸‰ä¸ªæ­¥éª¤ï¼š

1. ç­·å­è·Ÿå®ƒå·¦è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœç­·å­å·²ç»åœ¨æœ€å·¦è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨ã€‚

2. æ¯å­è·Ÿå®ƒå³è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœæ¯å­å·²ç»åœ¨æœ€å³è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨ã€‚

3. å‹ºå­è·Ÿå®ƒå·¦è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœå‹ºå­å·²ç»åœ¨æœ€å·¦è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨ã€‚

é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æŠŠè¿™ä¸‰ä¸ªæ­¥éª¤å°è£…æˆä¸€ä¸ªå°å‡½æ•°ï¼Œç„¶åè®©æ¯ä¸€ç§æ’åˆ—ç»„åˆéƒ½äº¤ç»™è¿™ä¸ªé­”æœ¯æ‰§è¡Œä¸€éï¼Œæœ€ç»ˆçœ‹çœ‹å¾—åˆ°çš„ç»“æœå³å¯ã€‚

é­”æœ¯æ­¥éª¤å®ç°å¦‚ä¸‹ï¼š

```go
// é­”æœ¯
func magic(items []string) {
	old := make([]string, len(items))
	copy(old, items)

	// 1. ç­·å­è·Ÿå®ƒå·¦è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœç­·å­å·²ç»åœ¨æœ€å·¦è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨
	for i := 1; i < len(items); i++ {
		if items[i] == "ç­·å­ğŸ¥¢" {
			items[i-1], items[i] = items[i], items[i-1]
			break
		}
	}

	// 2. æ¯å­è·Ÿå®ƒå³è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœæ¯å­å·²ç»åœ¨æœ€å³è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨
	for i := len(items) - 2; i >= 0; i-- {
		if items[i] == "æ¯å­ğŸº" {
			items[i], items[i+1] = items[i+1], items[i]
			break
		}
	}

	// 3. å‹ºå­è·Ÿå®ƒå·¦è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœå‹ºå­å·²ç»åœ¨æœ€å·¦è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨
	for i := 1; i < len(items); i++ {
		if items[i] == "å‹ºå­ğŸ¥„" {
			items[i-1], items[i] = items[i], items[i-1]
			break
		}
	}

	// æ‰“å°å½“å‰å’Œç»è¿‡é­”æœ¯æ“ä½œåçš„æ’åˆ—
	fmt.Println("å½“å‰æ’åˆ—ï¼š", old, " => ", "é­”æœ¯æ“ä½œåï¼š", items)
}
```

è¿™é‡Œé€»è¾‘éå¸¸ç®€å•ï¼Œå°±æ˜¯æŒ‰ç…§é­”æœ¯æ­¥éª¤äº¤æ¢ç‰©å“ã€‚

ç°åœ¨æˆ‘ä»¬å†ä¿®æ”¹ä¸‹ `permute` å‡½æ•°æ‰“å°æ’åˆ—é¡ºåºçš„ä»£ç  `fmt.Println(items)`ï¼Œæ”¹ä¸ºç›´æ¥è°ƒç”¨é­”æœ¯å‡½æ•° `magic(items)`ã€‚

æœ€ç»ˆå®ç°ä»£ç å¦‚ä¸‹ï¼š

```go
package main

import "fmt"

// ç”Ÿæˆæ‰€æœ‰æ’åˆ—ç»„åˆ
func permute(items []string, start int) {
	if start == len(items) {
		// å½“æ’åˆ—å®Œæˆæ—¶ï¼Œè¾“å‡ºå½“å‰çš„æ’åˆ—
		// fmt.Println(items)
		magic(items)
		return
	}

	for i := start; i < len(items); i++ {
		// äº¤æ¢ä½ç½®
		items[start], items[i] = items[i], items[start]
		// é€’å½’è°ƒç”¨
		permute(items, start+1)
		// äº¤æ¢å›åŸæ¥çš„ä½ç½®ï¼Œå›æº¯
		items[start], items[i] = items[i], items[start]
	}
}

// é­”æœ¯
func magic(items []string) {
	old := make([]string, len(items))
	copy(old, items)

	// 1. ç­·å­è·Ÿå®ƒå·¦è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœç­·å­å·²ç»åœ¨æœ€å·¦è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨
	for i := 1; i < len(items); i++ {
		if items[i] == "ç­·å­ğŸ¥¢" {
			items[i-1], items[i] = items[i], items[i-1]
			break
		}
	}

	// 2. æ¯å­è·Ÿå®ƒå³è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœæ¯å­å·²ç»åœ¨æœ€å³è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨
	for i := len(items) - 2; i >= 0; i-- {
		if items[i] == "æ¯å­ğŸº" {
			items[i], items[i+1] = items[i+1], items[i]
			break
		}
	}

	// 3. å‹ºå­è·Ÿå®ƒå·¦è¾¹çš„ç‰©å“äº’æ¢ï¼Œå¦‚æœå‹ºå­å·²ç»åœ¨æœ€å·¦è¾¹ï¼Œåˆ™æ— éœ€ç§»åŠ¨
	for i := 1; i < len(items); i++ {
		if items[i] == "å‹ºå­ğŸ¥„" {
			items[i-1], items[i] = items[i], items[i-1]
			break
		}
	}

	// æ‰“å°å½“å‰å’Œç»è¿‡é­”æœ¯æ“ä½œåçš„æ’åˆ—
	fmt.Println("å½“å‰æ’åˆ—ï¼š", old, " => ", "é­”æœ¯æ“ä½œåï¼š", items)
}

func main() {
	items := []string{"ç­·å­ğŸ¥¢", "æ¯å­ğŸº", "å‹ºå­ğŸ¥„"}
	permute(items, 0)
}
```

æ‰§è¡Œç¤ºä¾‹ä»£ç ï¼Œå¾—åˆ°è¾“å‡ºå¦‚ä¸‹ï¼š

```bash
$ go run main.go
å½“å‰æ’åˆ—ï¼š [ç­·å­ğŸ¥¢ æ¯å­ğŸº å‹ºå­ğŸ¥„]  =>  é­”æœ¯æ“ä½œåï¼š [å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢ æ¯å­ğŸº]
å½“å‰æ’åˆ—ï¼š [å‹ºå­ğŸ¥„ æ¯å­ğŸº ç­·å­ğŸ¥¢]  =>  é­”æœ¯æ“ä½œåï¼š [å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢ æ¯å­ğŸº]
å½“å‰æ’åˆ—ï¼š [æ¯å­ğŸº å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢]  =>  é­”æœ¯æ“ä½œåï¼š [ç­·å­ğŸ¥¢ å‹ºå­ğŸ¥„ æ¯å­ğŸº]
å½“å‰æ’åˆ—ï¼š [ç­·å­ğŸ¥¢ æ¯å­ğŸº å‹ºå­ğŸ¥„]  =>  é­”æœ¯æ“ä½œåï¼š [å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢ æ¯å­ğŸº]
å½“å‰æ’åˆ—ï¼š [ç­·å­ğŸ¥¢ å‹ºå­ğŸ¥„ æ¯å­ğŸº]  =>  é­”æœ¯æ“ä½œåï¼š [å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢ æ¯å­ğŸº]
å½“å‰æ’åˆ—ï¼š [å‹ºå­ğŸ¥„ æ¯å­ğŸº ç­·å­ğŸ¥¢]  =>  é­”æœ¯æ“ä½œåï¼š [å‹ºå­ğŸ¥„ ç­·å­ğŸ¥¢ æ¯å­ğŸº]
```

å¯ä»¥å‘ç°ï¼Œæ— è®ºå“ªä¸€ç§æ’åˆ—é¡ºåºï¼Œç»è¿‡é­”æœ¯çš„ä¸‰ä¸ªæ­¥éª¤ä»¥åï¼Œæœ€ç»ˆç»“æœéƒ½æ˜¯ä¸€è‡´çš„ `æ¯å­ğŸº` åœ¨æœ€å³ä¾§ã€‚æ‰€ä»¥è¿™ä¸ªé­”æœ¯ä¸€å®šä¼šæˆåŠŸï¼Œå°å°¼ç¬‘è€Œä¸è¯­ğŸ˜„ã€‚

![é­”æœ¯æˆªå›¾](magic2.png)

### æ€»ç»“

æ²¡å•¥å¥½æ€»ç»“çš„ï¼Œçœ‹ä¸ªä¹å­ï¼Œä»Šå¹´çš„é­”æœ¯å±å®æœ‰ç‚¹ç®€é™‹ã€‚

å—¯ï¼Œåˆæ°´äº†ä¸€ç¯‡æ–‡ç«  :)

**å»¶ä¼¸é˜…è¯»**

+ ç”¨ Go è¯­è¨€å®ç°åˆ˜è°¦ 2024 æ˜¥æ™šé­”æœ¯ï¼Œè¿˜åŸå°¼æ ¼ä¹°ææ±—æµæµƒèƒŒçš„å°´å°¬ç¬é—´!ï¼š[https://jianghushinian.cn/2024/02/10/use-go-to-realize-liu-qian-s-2024-spring-festival-gala-magic/](https://jianghushinian.cn/2024/02/10/use-go-to-realize-liu-qian-s-2024-spring-festival-gala-magic/)
+ æœ¬æ–‡ GitHub ç¤ºä¾‹ä»£ç ï¼š[https://github.com/jianghushinian/blog-go-example/tree/main/2025-spring-festival-magic](https://github.com/jianghushinian/blog-go-example/tree/main/2025-spring-festival-magic)

**è”ç³»æˆ‘**

+ å…¬ä¼—å·ï¼š[Goç¼–ç¨‹ä¸–ç•Œ](https://jianghushinian.cn/about)
+ å¾®ä¿¡ï¼šjianghushinian
+ é‚®ç®±ï¼š[jianghushinian007@outlook.com](mailto:jianghushinian007@outlook.com)
+ åšå®¢ï¼š[https://jianghushinian.cn](https://jianghushinian.cn)
+ GitHubï¼š[https://github.com/jianghushinian](https://github.com/jianghushinian)
