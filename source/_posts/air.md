---
title: 'æ•ˆç‡å·¥å…·ï¼šä½¿ç”¨ air çƒ­é‡è½½ Go åº”ç”¨ç¨‹åº'
date: 2025-04-03 17:42:36
tags:
- Go
- å‘½ä»¤è¡Œ
categories:
- Go
---

åœ¨é¡¹ç›®å¼€å‘é˜¶æ®µï¼Œçƒ­é‡è½½æŠ€æœ¯éå¸¸æœ‰ç”¨ï¼Œé€šè¿‡çƒ­é‡è½½ï¼Œå¯ä»¥å®ç°åœ¨æ— éœ€æ‰‹åŠ¨å¹²é¢„çš„æƒ…å†µä¸‹ï¼Œä¿®æ”¹ä»£ç æ–‡ä»¶åï¼Œè‡ªåŠ¨é‡å¯ Go åº”ç”¨ã€‚è¿™æå¤§çš„æå‡äº†å¼€å‘ä½“éªŒï¼ŒåŒæ—¶ä¹ŸèŠ‚çº¦äº†æˆ‘ä»¬çš„å¼€å‘æ—¶é—´ã€‚æœ¬æ–‡æˆ‘ä»¬ä¸€èµ·æ¥ä½“éªŒä¸€ä¸‹ä½¿ç”¨ air çƒ­é‡è½½ Go åº”ç”¨ç¨‹åºï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚

<!-- more -->

### ç®€ä»‹

air æ˜¯ä¸º Go åº”ç”¨å¼€å‘è®¾è®¡çš„ä¸€æ¬¾æ”¯æŒçƒ­é‡è½½çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

ä»¥ä¸‹æ˜¯ air å®˜æ–¹æ€»ç»“çš„ç‰¹è‰²ï¼š

+ å½©è‰²çš„æ—¥å¿—è¾“å‡º
+ è‡ªå®šä¹‰æ„å»ºæˆ–å¿…è¦çš„å‘½ä»¤
+ æ”¯æŒå¤–éƒ¨å­ç›®å½•
+ åœ¨ Air å¯åŠ¨ä¹‹åï¼Œå…è®¸ç›‘å¬æ–°åˆ›å»ºçš„è·¯å¾„
+ æ›´æ£’çš„æ„å»ºè¿‡ç¨‹

### å¿«é€Ÿå¼€å§‹

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡å¿«é€Ÿå¼€å§‹æ¥ä½“éªŒä¸€ä¸‹ air çš„ä¾¿æ·ä¸å¼ºå¤§ã€‚

#### å®‰è£…

é¦–å…ˆæˆ‘ä»¬æ¥å®‰è£… airï¼Œå‘½ä»¤å¦‚ä¸‹ã€‚

> NOTE:
>
> <font style="color:rgb(31, 35, 40);">å»ºè®®ä½¿ç”¨ go 1.23 æˆ–æ›´é«˜ç‰ˆæœ¬</font>
>

```bash
$ go install github.com/air-verse/air@latest
```

air çš„å®‰è£…å¾ˆç®€å•ï¼Œå› ä¸ºæ˜¯ä½¿ç”¨ Go è¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥ç›´æ¥é€šè¿‡ `go install` å‘½ä»¤å³å¯å®‰è£…ã€‚

è¿™é‡Œæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šå®‰è£…æŸä¸ªå…·ä½“ç‰ˆæœ¬ï¼Œè€Œæ˜¯å®‰è£… `latest` ç‰ˆæœ¬ï¼Œå› ä¸ºè¿™æ˜¯ä¸€æ¬¾å¼€å‘å·¥å…·ï¼Œä¸€èˆ¬ä¸å¤ªä¼šå‡ºç° API é¢‘ç¹å˜æ›´çš„æƒ…å†µï¼Œæ‰€ä»¥å°±é€‰æ‹©ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚

#### ä½¿ç”¨

å‡†å¤‡ä»¥ä¸‹ç›®å½•ç»“æ„ã€‚

```bash
$ tree -F fly
fly/
â”œâ”€â”€ README.md
â””â”€â”€ main.go
```

ç°åœ¨æˆ‘ä»¬æ¥ç¼–å†™ä»£ç ä½“éªŒä¸€ä¸‹ airï¼Œ`main.go` ä»£ç å¦‚ä¸‹ã€‚

```go
package main

import (
	"fmt"
	"net/http"
	"os"
	"os/signal"
	"syscall"
)

func main() {
	// æ³¨å†Œä¼˜é›…é€€å‡ºä¿¡å·
	signalChan := make(chan os.Signal, 1)
	signal.Notify(signalChan, syscall.SIGINT, syscall.SIGTERM)

	// åˆå§‹åŒ– HTTP æœåŠ¡å™¨
	server := &http.Server{Addr: ":8080"}

	// å®šä¹‰è·¯ç”±
	http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
		fmt.Fprintf(w, "ğŸš€ Hello Air! (PID: %d)", os.Getpid()) // PID ç”¨äºéªŒè¯çƒ­æ›¿æ¢
	})

	// å¯åŠ¨æœåŠ¡åç¨‹
	go func() {
		fmt.Printf("Server started at http://localhost:8080 (PID: %d)\n", os.Getpid())
		if err := server.ListenAndServe(); err != nil && err != http.ErrServerClosed {
			fmt.Printf("Server error: %v\n", err)
		}
	}()

	// é˜»å¡ç­‰å¾…ç»ˆæ­¢ä¿¡å·
	<-signalChan
	fmt.Println("Server shutting down...")
	server.Close()
}
```

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ Web Server ç¨‹åºï¼Œæ ¹è·¯ç”± `/` çš„å¤„ç†å‡½æ•°ä¸­è·å–å¹¶è¿”å›äº†å½“å‰ç¨‹åºçš„ `pid`ã€‚

åœ¨é¡¹ç›®æ ¹ç›®å½• `fly/` ä¸‹ç›´æ¥æ‰§è¡Œ `air` å‘½ä»¤ã€‚

![](air-fly.png)

å¯ä»¥çœ‹åˆ°ï¼Œåªéœ€è¦ç®€å•çš„ `air` å‘½ä»¤ï¼Œæˆ‘ä»¬çš„ Go ç¨‹åºå°±å¯åŠ¨èµ·æ¥äº†ã€‚

æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œä½¿ç”¨ `curl` å‘½ä»¤è®¿é—® [http://localhost:8080](http://localhost:8080)ã€‚

![](curl-air.png)

å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ­£ç¡®çš„å“åº”ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å°è¯•å°†æ ¹è·¯ç”±å¤„ç†å‡½æ•°ä¸­çš„å“åº”å†…å®¹ä» `Hello Air!` æ”¹æˆ `Hello Fly!` å¹¶ä¿å­˜ç¨‹åºã€‚

`air` ä¼šè‡ªåŠ¨é‡å¯æˆ‘ä»¬çš„ Web Server ç¨‹åºã€‚

![](air-restart.png)

é‡æ–°ä½¿ç”¨ `curl` å‘½ä»¤è®¿é—® [http://localhost:8080](http://localhost:8080)ã€‚

![](curl-fly.png)

å“åº”ç»“æœå·²ç»å˜äº†ï¼Œå¹¶ä¸”ç¨‹åºçš„ `pid` ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œè¯´æ˜ Go ç¨‹åºçœŸçš„è¢«é‡å¯äº†ã€‚

æ²¡é”™ï¼Œair çš„ä½¿ç”¨å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚

é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†å°†å¦‚ä¸‹å†…å®¹ï¼Œå†™å…¥ `README.md` ä¸­å¹¶ä¿å­˜æ–‡ä»¶ã€‚

````markdown
# Air çƒ­é‡è½½æ¼”ç¤ºé¡¹ç›®

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… Air

```bash
$ go install github.com/air-verse/air@latest
```

### 2. ä½¿ç”¨ Air

```bash
$ cd /path/to/your_project
$ air
```

````

å¯ä»¥å‘ç°ï¼Œè¿™æ¬¡ `air` å¹¶æ²¡æœ‰é‡å¯ Go ç¨‹åºã€‚

![](air-restart.png)

æƒ³æ¥è¿™ä¹Ÿåˆæƒ…åˆç†ï¼Œ`README.md` æ–‡ä»¶å¹¶ä¸æ˜¯ Go ç¨‹åºä»£ç ï¼Œä¸ä¼šå½±å“ç¨‹åºæ‰§è¡Œç»“æœï¼Œæ‰€ä»¥æ— éœ€é‡å¯ã€‚

ä¸è¿‡æœ‰ä¸€ç§æƒ…å†µåˆ™éœ€è¦è€ƒè™‘ï¼Œå¦‚æœæˆ‘ä»¬æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è¿”å›é™æ€çš„ `README.md` æ–‡ä»¶å†…å®¹ï¼Œé‚£ä¹ˆ `README.md` æ–‡ä»¶ä¿®æ”¹ï¼Œå°±éœ€è¦é‡å¯ Go ç¨‹åºã€‚è‡³äºå¦‚ä½•å®ç°ï¼Œçœ‹å®Œåæ–‡çš„è®²è§£ï¼Œç›¸ä¿¡ä½ èƒ½å¤Ÿæ‰¾åˆ°ç­”æ¡ˆã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬æŒ‰ä¸‹ `Ctrl + C` ç»“æŸè¿›ç¨‹ã€‚

![](air-ctrl-c.png)

ç»†å¿ƒçš„ä½ ä¹Ÿè®¸å·²ç»å‘ç°ï¼Œæˆ‘ä»¬çš„ `main.go` ä»£ç åœ¨å®ç°ä¼˜é›…é€€å‡ºåä¼šè¾“å‡ºä¸€æ¡æ—¥å¿— `Server shutting down...`ï¼Œå¯æ˜¯ç°åœ¨ç»ˆç«¯ä¸­å¹¶æ²¡æœ‰è¾“å‡ºã€‚

è¦å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå’±ä»¬æ¥ç€å¾€ä¸‹çœ‹ã€‚

### ä½¿ç”¨è¿›é˜¶
ä¸Šä¸€å°èŠ‚æˆ‘ä»¬å¿«é€Ÿä½“éªŒäº† airï¼Œæœ¬å°èŠ‚å†æ¥çœ‹ä¸‹ air è¿˜æ”¯æŒå“ªäº›é«˜çº§åŠŸèƒ½ã€‚

#### è‡ªå®šä¹‰é…ç½®
air æ”¯æŒå¾ˆå¤šé«˜çº§åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡¹æ¥å¼€å¯æˆ–å…³é—­ã€‚

air çš„é…ç½®æ–‡ä»¶æ ¼å¼é—® `toml`ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼æ¥è·å¾— air é…ç½®æ–‡ä»¶æ¨¡æ¿ã€‚

ä¸€ç§æ˜¯ air å®˜æ–¹æä¾›äº† example é…ç½®æ ·ä¾‹ï¼Œä½ å¯ä»¥åœ¨æ­¤æŸ¥çœ‹ [https://github.com/air-verse/air/blob/master/air_example.toml](https://github.com/air-verse/air/blob/master/air_example.toml)ã€‚

å¦å¤–ä¸€ç§æ˜¯ä½¿ç”¨ `air init` å‘½ä»¤æ¥è‡ªåŠ¨ç”Ÿæˆã€‚

```bash
$ air init

  __    _   ___  
 / /\  | | | |_) 
/_/--\ |_| |_| \_ v1.61.7, built with Go go1.24.0

.air.toml file created to the current directory with the default settings
```

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ `air init` åï¼Œä¼šç”Ÿæˆå« `.air.toml` çš„é…ç½®æ–‡ä»¶ã€‚

air çš„å…¨é‡é…ç½®å†…å®¹å¦‚ä¸‹ï¼Œæˆ‘å¯¹å…¶åšäº†è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šã€‚

```toml
# Air çƒ­é‡è½½å·¥å…·çš„ TOML æ ¼å¼é…ç½®æ–‡ä»¶
# å®Œæ•´æ–‡æ¡£å‚è€ƒï¼šhttps://github.com/air-verse/air

# å·¥ä½œç›®å½•
# æ”¯æŒç›¸å¯¹è·¯å¾„ï¼ˆ.ï¼‰æˆ–ç»å¯¹è·¯å¾„ï¼Œæ³¨æ„åç»­ç›®å½•å¿…é¡»åœ¨æ­¤ç›®å½•ä¸‹
root = "."
# air æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ç›®å½•
tmp_dir = "tmp"

[build]
# æ„å»ºå‰æ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ï¼ˆæ¯é¡¹å‘½ä»¤æŒ‰é¡ºåºæ‰§è¡Œï¼‰
pre_cmd = ["echo 'hello air' > pre_cmd.txt"]
# ä¸»æ„å»ºå‘½ä»¤ï¼ˆæ”¯æŒå¸¸è§„ shell å‘½ä»¤æˆ– make å·¥å…·ï¼‰
cmd = "go build -o ./tmp/main ."
# æ„å»ºåæ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ï¼ˆç›¸å½“äºæŒ‰ ^C ç¨‹åºç»ˆæ­¢åè§¦å‘ï¼‰
post_cmd = ["echo 'hello air' > post_cmd.txt"]
# ä» `cmd` ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„
bin = "tmp/main"
# è‡ªå®šä¹‰è¿è¡Œå‚æ•°ï¼ˆå¯è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰
full_bin = "APP_ENV=dev APP_USER=air ./tmp/main"
# ä¼ é€’ç»™äºŒè¿›åˆ¶æ–‡ä»¶çš„è¿è¡Œå‚æ•°ï¼ˆç¤ºä¾‹å°†æ‰§è¡Œ './tmp/main hello world'ï¼‰
args_bin = ["hello", "world"]
# ç›‘å¬ä»¥ä¸‹æ‰©å±•åçš„æ–‡ä»¶å˜åŠ¨
include_ext = ["go", "tpl", "tmpl", "html"]
# æ’é™¤ç›‘è§†çš„ç›®å½•åˆ—è¡¨
exclude_dir = ["assets", "tmp", "vendor", "frontend/node_modules"]
# æŒ‡å®šè¦ç›‘è§†çš„ç›®å½•ï¼ˆç©ºæ•°ç»„è¡¨ç¤ºè‡ªåŠ¨æ£€æµ‹ï¼‰
include_dir = []
# æŒ‡å®šè¦ç›‘è§†çš„ç‰¹å®šæ–‡ä»¶ï¼ˆç©ºæ•°ç»„è¡¨ç¤ºè‡ªåŠ¨æ£€æµ‹ï¼‰
include_file = []
# æ’é™¤ç›‘è§†çš„ç‰¹å®šæ–‡ä»¶ï¼ˆç©ºæ•°ç»„è¡¨ç¤ºä¸è¿‡æ»¤ï¼‰
exclude_file = []
# é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ’é™¤æ–‡ä»¶ï¼ˆç¤ºä¾‹æ’é™¤æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ï¼‰
exclude_regex = ["_test\\.go"]
# æ˜¯å¦æ’é™¤æœªä¿®æ”¹çš„æ–‡ä»¶ï¼ˆæå‡æ€§èƒ½ï¼‰
exclude_unchanged = true
# æ˜¯å¦è·Ÿè¸ªç¬¦å·é“¾æ¥ç›®å½•ï¼Œå…è®¸ Air è·Ÿè¸ªç¬¦å·é“¾æ¥ï¼ˆè½¯é“¾æ¥ï¼‰æŒ‡å‘çš„ç›®å½•/æ–‡ä»¶å˜åŒ–ï¼Œé€‚ç”¨äºé¡¹ç›®ä¾èµ–å¤–éƒ¨ç¬¦å·é“¾æ¥èµ„æºçš„åœºæ™¯
follow_symlink = true
# æ—¥å¿—æ–‡ä»¶å­˜å‚¨è·¯å¾„ï¼ˆä½äº tmp_dir ä¸‹ï¼‰
log = "air.log"
# æ˜¯å¦ä½¿ç”¨è½®è¯¢æœºåˆ¶æ£€æµ‹æ–‡ä»¶å˜åŒ–ï¼ˆæ›¿ä»£ fsnotifyï¼‰ï¼ŒAir é»˜è®¤ä½¿ç”¨çš„è·¨å¹³å°æ–‡ä»¶ç›‘æ§åº“ï¼ˆåŸºäº Go çš„ fsnotify åŒ…ï¼‰ï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿäº‹ä»¶å®æ—¶æ„ŸçŸ¥æ–‡ä»¶å˜åŒ–
poll = false
# è½®è¯¢æ£€æµ‹é—´éš”ï¼ˆé»˜è®¤æœ€ä½ 500msï¼‰
poll_interval = 500 # ms
# æ–‡ä»¶å˜åŠ¨åçš„å»¶è¿Ÿæ„å»ºæ—¶é—´ï¼ˆé˜²æ­¢é«˜é¢‘è§¦å‘ï¼‰
delay = 0 # ms
# æ„å»ºå‡ºé”™æ—¶æ˜¯å¦ç»ˆæ­¢æ—§è¿›ç¨‹
stop_on_error = true
# æ˜¯å¦å‘é€ä¸­æ–­ä¿¡å·å†ç»ˆæ­¢è¿›ç¨‹ï¼ˆWindows ä¸æ”¯æŒï¼‰
send_interrupt = false
# å‘é€ä¸­æ–­ä¿¡å·åçš„ç»ˆæ­¢å»¶è¿Ÿ
kill_delay = 500 # nanosecond
# å½“ç¨‹åºé€€å‡ºæ—¶ï¼Œæ˜¯å¦é‡æ–°è¿è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆé€‚åˆ CLI å·¥å…·ï¼‰
rerun = false
# é‡æ–°è¿è¡Œçš„æ—¶é—´é—´éš”
rerun_delay = 500

[log]
# æ˜¯å¦æ˜¾ç¤ºæ—¥å¿—æ—¶é—´æˆ³
time = false
# ä»…æ˜¾ç¤ºä¸»æ—¥å¿—ï¼ˆè¿‡æ»¤ç›‘æ§/æ„å»º/è¿è¡Œæ—¥å¿—ï¼‰
main_only = false
# ç¦ç”¨æ‰€æœ‰æ—¥å¿—è¾“å‡º
silent = false

[color]
# ä¸»æ—¥å¿—é¢œè‰²ï¼ˆæ”¯æŒ ANSI é¢œè‰²ä»£ç ï¼‰
main = "magenta"
# æ–‡ä»¶ç›‘æ§æ—¥å¿—é¢œè‰²
watcher = "cyan"
# æ„å»ºè¿‡ç¨‹æ—¥å¿—é¢œè‰²
build = "yellow"
# è¿è¡Œæ—¥å¿—é¢œè‰²
runner = "green"

[misc]
# é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç†ä¸´æ—¶ç›®å½•ï¼ˆtmp_dirï¼‰
clean_on_exit = true

[screen]
# é‡å»ºæ—¶æ¸…ç©ºæ§åˆ¶å°ç•Œé¢
clear_on_rebuild = true
# ä¿ç•™æ»šåŠ¨å†å²ï¼ˆä¸æ¸…å±æ—¶æœ‰æ•ˆï¼‰
keep_scroll = true

[proxy]
# å¯ç”¨æµè§ˆå™¨å®æ—¶é‡è½½åŠŸèƒ½
# å‚è€ƒï¼šhttps://github.com/air-verse/air/tree/master?tab=readme-ov-file#how-to-reload-the-browser-automatically-on-static-file-changes
enabled = true
# ä»£ç†æœåŠ¡å™¨ç«¯å£ï¼ˆAir ç›‘æ§ç«¯å£ï¼‰ï¼Œæµè§ˆå™¨è¿æ¥åˆ° proxy_portï¼ŒAir å°†è¯·æ±‚è½¬å‘åˆ°åº”ç”¨çš„çœŸå®ç«¯å£ app_port
proxy_port = 8090
# åº”ç”¨å®é™…è¿è¡Œç«¯å£ï¼ˆéœ€ä¸ä¸šåŠ¡ä»£ç ç«¯å£ä¸€è‡´ï¼‰
app_port = 8080
```

å…¨é‡é…ç½®çœ‹èµ·æ¥å¾ˆå¤šï¼Œä¸è¿‡åˆ«è¢«å“åˆ°ã€‚å…¶å®è¿™äº›é…ç½®å¾ˆå¥½ç†è§£ï¼Œå¹¶ä¸”æˆ‘éƒ½å†™äº†è¯¦ç»†çš„æ³¨é‡Šã€‚

æˆ‘ä»¬å¯ä»¥å‘ç°é…ç½®é¡¹æ˜¯æŒ‰åŠŸèƒ½è¿›è¡Œåˆ†ç±»çš„ï¼Œæœ‰å¦‚ä¸‹å‡ å—é…ç½®ã€‚

+ å…¨å±€é…ç½®ï¼š`root` å’Œ `tmp_dir` åˆ†åˆ«è¡¨ç¤ºé¡¹ç›®çš„å·¥ä½œç›®å½•å’Œä¸´æ—¶ç›®å½•ã€‚
+ `build` ç±»é…ç½®ï¼šéƒ½æ˜¯ä¸æ„å»ºç›¸å…³çš„é…ç½®é¡¹ã€‚
+ `log` ç±»é…ç½®ï¼šä¸æ—¥å¿—ç›¸å…³çš„é…ç½®é¡¹ã€‚
+ `color` ç±»é…ç½®ï¼šä¸è¾“å‡ºé¢œè‰²ç›¸å…³çš„é…ç½®é¡¹ã€‚
+ `misc` ç±»é…ç½®ï¼šæ‚é¡¹é…ç½®ï¼Œå…¶å®åªæœ‰ä¸€ä¸ª `clean_on_exit` é…ç½®å¯ä»¥ç”¨æ¥æ¸…ç†ä¸´æ—¶ç›®å½•ã€‚
+ `screen` ç±»é…ç½®ï¼šæ§åˆ¶å°ç›¸å…³çš„é…ç½®é¡¹ã€‚
+ `proxy` ç±»é…ç½®ï¼šä»£ç†ç›¸å…³çš„é…ç½®é¡¹ã€‚

å…¶å®åˆ†æå®Œäº†è¿™äº›é…ç½®é¡¹ï¼Œä½ å°±èƒ½å¤Ÿå‘ç°ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„é…ç½®å…¶å®ä¹Ÿå°±æ˜¯ `build` é…ç½®é¡¹ä¸‹çš„é‚£å‡ ä¸ªï¼Œå…¶ä»–çš„ç­‰ç”¨åˆ°äº†å†å»ç ”ç©¶ä¸è¿Ÿã€‚

æˆ‘ä»¬é€šå¸¸å¯ä»¥é‡ç‚¹å…³æ³¨è¿™å‡ ä¸ªé…ç½®é¡¹ï¼š

```toml
[build]
# ä¸»æ„å»ºå‘½ä»¤ï¼ˆæ”¯æŒå¸¸è§„ shell å‘½ä»¤æˆ– make å·¥å…·ï¼‰
cmd = "go build -o ./tmp/main ."
# ä» `cmd` ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„
bin = "tmp/main"
# è‡ªå®šä¹‰è¿è¡Œå‚æ•°ï¼ˆå¯è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰
full_bin = "APP_ENV=dev APP_USER=air ./tmp/main"
# ä¼ é€’ç»™äºŒè¿›åˆ¶æ–‡ä»¶çš„è¿è¡Œå‚æ•°ï¼ˆç¤ºä¾‹å°†æ‰§è¡Œ './tmp/main hello world'ï¼‰
args_bin = ["hello", "world"]
```

`cmd`ã€`bin`ã€`args_bin` 3 è€…æ­£æ˜¯å¯¹åº”äº† Go åº”ç”¨æ„å»ºã€æ‰§è¡Œã€å’Œä¼ é€’å‘½ä»¤è¡Œå‚æ•°çš„åŠŸèƒ½ã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ 3 é¡¹é…ç½®ã€‚`full_bin` åˆ™æ˜¯é«˜é˜¶ç‰ˆçš„ `bin`ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ã€‚

è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ`cmd` ä¸ä»…æ”¯æŒ `go build` æ„å»ºå‘½ä»¤ï¼Œå®ƒè¿˜æ”¯æŒå¸¸è§„çš„ `shell` å‘½ä»¤å’Œ `make` å‘½ä»¤ï¼Œè¿™ä¸ºåº”ç”¨æ„å»ºæä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚

æ­¤å¤– `misc` é…ç½®é¡¹ä¸‹çš„ `clean_on_exit` é…ç½®ä¹Ÿæ¯”è¾ƒæœ‰ç”¨ï¼Œå°†å…¶è®¾ç½®ä¸º `true` å¯ä»¥è‡ªåŠ¨æ¸…ç† `tmp_dir` ç›®å½•äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ã€‚

å­¦ä¹ äº† air çš„é…ç½®é¡¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è§£å†³ç¨‹åºé€€å‡ºæ—¥å¿— `Server shutting down...` æœªè¾“å‡ºçš„é—®é¢˜ã€‚

é¦–å…ˆå°†ä»¥ä¸Šé…ç½®ä¿¡æ¯ä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½• `fly/` ä¸‹çš„ `.air.toml` æ–‡ä»¶ä¸­ã€‚

æ¥ç€ï¼Œä¿®æ”¹å¦‚ä¸‹è¿™ä¸¤é¡¹é…ç½®ã€‚

```toml
[build]
  kill_delay = "1s"
  send_interrupt = true
```

å¼€å¯ `send_interrupt` é…ç½®é¡¹åï¼Œ`air` åœ¨ç»ˆæ­¢æˆ‘ä»¬çš„ Go ç¨‹åºä¹‹å‰ï¼Œä¼šå‘å…¶å‘é€ `Ctrl + C` ä¿¡å·ï¼Œ`kill_delay` é…ç½®é¡¹ä¿è¯ `air` å‘½ä»¤ä¸º Go ç¨‹åºé¢„ç•™è¶³å¤Ÿå¤šçš„é€€å‡ºæ—¶é—´ï¼Œç»™ç¨‹åºä¼˜é›…é€€å‡ºçš„æœºä¼šã€‚

å†æ¬¡ä½¿ç”¨ `air` å‘½ä»¤å¯åŠ¨ç¨‹åºã€‚

![](air-shutting-down.png)

ç„¶åä¿®æ”¹ä»»æ„ä¸€è¡Œä»£ç ï¼Œæˆ‘ä»¬ç«‹åˆ»ä¼šçœ‹åˆ°é‡å¯æ—¶ `Server shutting down...` æ—¥å¿—è¢«è¾“å‡ºäº†ã€‚æœ€åæŒ‰ä¸‹ `Ctrl + C` ç»“æŸè¿›ç¨‹ï¼ŒåŒæ ·ä¼šå¾—åˆ° `Server shutting down...` æ—¥å¿—è¾“å‡ºã€‚å¹¶ä¸”ç­‰å¾… 1s è¿‡å `air` æ‰ä¼šè¾“å‡º `see you again~` å¹¶é€€å‡ºã€‚

è‡³äºå…¶ä»–é…ç½®é¡¹ï¼Œå°±äº¤ç»™ä½ è‡ªè¡Œå»æ¢ç´¢äº†ï¼ˆæ€è€ƒä¸‹ï¼Œç°åœ¨ä½ çŸ¥é“å¦‚ä½•è®© `air` ç›‘å¬ `MarkDown` æ–‡ä»¶äº†å—ï¼‰ã€‚

#### å‘½ä»¤è¡Œå‚æ•°

`air` å‘½ä»¤ä¸ä»…æ”¯æŒä½¿ç”¨é…ç½®æ–‡ä»¶æ¥å¼€å¯æˆ–å…³é—­åŠŸèƒ½ï¼Œå®ƒä¹Ÿæ”¯æŒç›´æ¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°çš„æ–¹å¼æ¥å¼€å¯æˆ–å…³é—­æŸé¡¹åŠŸèƒ½ã€‚

åœ¨å‰æ–‡ä¸­æˆ‘ä»¬å·²ç»ä½¿ç”¨è¿‡ `air init` æ¥åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œç°åœ¨æ¥çœ‹çœ‹ `air` è¿˜æ”¯æŒå“ªäº›å‘½ä»¤è¡Œå‚æ•°ã€‚

```bash
$  air -h  
Usage of air:

If no command is provided air will start the runner with the provided flags

Commands:
  init  creates a .air.toml file with default settings to the current directory

Flags:
  -build.args_bin string
        Add additional arguments when running binary (bin/full_bin).
  ...
  -c string
        config path
  ...
  -v    show version
```

æ‰§è¡Œ `air -h` æˆ– `air --help` å³å¯æŸ¥çœ‹å‘½ä»¤è¡Œå¸®åŠ©ä¿¡æ¯ã€‚ç¯‡å¹…æ‰€é™ï¼Œè¿™é‡Œçœç•¥äº†å¤§éƒ¨åˆ†è¾“å‡ºã€‚

ä¸è¿‡æ ¹æ®ç°æœ‰çš„è¾“å‡ºå†…å®¹æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œ`air` å¯ä»¥ä½¿ç”¨ `-c` å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤è¯»å–æ‰§è¡Œå‘½ä»¤çš„å½“å‰ç›®å½•ä¸‹ `.air.toml` é…ç½®æ–‡ä»¶ï¼‰ï¼›`-v` å‚æ•°å¯ä»¥è¾“å‡ºç‰ˆæœ¬ï¼›`-build.args_bin` çš„ä½œç”¨å®é™…ä¸Šä¸é…ç½®æ–‡ä»¶ä¸­ `[build]` åˆ†ç±»ä¸‹ `args_bin` é…ç½®é¡¹ç›¸åŒã€‚

æ ¹æ®å¸®åŠ©ä¿¡æ¯çš„è¾“å‡ºå†…å®¹æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºï¼Œå®é™…ä¸Š `air` æ‰€æ”¯æŒçš„å‘½ä»¤å°±æ˜¯é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„é…ç½®é¡¹å¯¹åº”çš„åŠŸèƒ½ã€‚æ‰€ä»¥å­¦ä¹ å®Œ `air` çš„é…ç½®æ–‡ä»¶ï¼Œå†æ¥çœ‹ `air` çš„å‘½ä»¤è¡Œå‚æ•°å‡ ä¹æ²¡æœ‰å­¦ä¹ æˆæœ¬ã€‚

é‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬è¿˜æœ‰æœ€åä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼Œæ—¢ç„¶ `air` å³æ”¯æŒå‘½ä»¤è¡Œå‚æ•°ï¼Œåˆæ”¯æŒé…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå¦‚æœåŒæ—¶è®¾ç½®äºŒè€…ï¼Œè°çš„ä¼˜å…ˆçº§æ›´é«˜å‘¢ï¼Ÿ

æˆ‘ä»¬ä¸€èµ·æ¥åšä¸€ä¸ªå®éªŒï¼Œä¿®æ”¹ Go ç¨‹åºçš„ `main.go` æ–‡ä»¶ï¼Œåœ¨ `main` å‡½æ•°çš„ç¬¬ä¸€è¡ŒåŠ ä¸Šå¦‚ä¸‹ä»£ç ã€‚

```go
fmt.Printf("args[1]: %v\n", os.Args[1])
```

è¿™è¡Œä»£ç å¯ä»¥æ‰“å° Go ç¨‹åºæ¥æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ã€‚

æ‰§è¡Œ `air -build.args_bin xxx` å‘½ä»¤å¯åŠ¨ç¨‹åºã€‚

![](air-arg.png)

åœ¨è¾“å‡ºæ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é¡ºåˆ©å¾—åˆ°äº†å‘½ä»¤è¡Œå‚æ•° `xxx`ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹ `.air.toml` ä¸­å¦‚ä¸‹é…ç½® é¡¹ã€‚

```toml
[build]
  args_bin = ["yyy"]
```

ç°åœ¨æˆ‘ä»¬æ‰§è¡Œ `air -build.args_bin xxx -c .air.toml` å‘½ä»¤å¯åŠ¨ç¨‹åºã€‚

![](air-arg-config.png)

è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬æ—¢æŒ‡å®šäº†å‘½ä»¤è¡Œå‚æ•° `-build.args_bin xxx`ï¼ŒåˆæŒ‡å®šäº†é…ç½®æ–‡ä»¶ `-c .air.toml`ã€‚æ ¹æ®è¾“å‡ºæ—¥å¿—å¯ä»¥å‘ç°ï¼Œ`air` çš„å‘½ä»¤è¡Œå‚æ•°ä¼˜å…ˆçº§é«˜äºé…ç½®æ–‡ä»¶ã€‚

è¿™ä¸€ç»“è®ºç¬¦åˆç›´è§‰ï¼Œä¹Ÿç¬¦åˆç»å¤§å¤šæ•° Go å‘½ä»¤è¡Œç¨‹åºçš„è®¾å®šï¼Œæˆ‘ä»¬å¯ä»¥ä½œä¸ºç»éªŒè®°ä¸‹æ¥ã€‚

é‚£ä¹ˆç°åœ¨å¦‚æœç›´æ¥ä½¿ç”¨ `air -c .air.toml` å‘½ä»¤å¯åŠ¨ç¨‹åºã€‚

![](air-config.png)

è¾“å‡ºç»“æœå·²ç»ä¸è¨€è‡ªæ˜äº†ã€‚

å¯¹äº `air` å‘½ä»¤è¡Œå‚æ•°çš„è®²è§£å°±åˆ°è¿™é‡Œï¼Œå…¶ä»–å‚æ•°è¯»è€…å¯ä»¥è‡ªè¡Œå°è¯•ã€‚

### æ€»ç»“

åœ¨å¼€å‘é˜¶æ®µä½¿ç”¨çƒ­é‡è½½æŠ€æœ¯ï¼Œå¯ä»¥æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡å’Œæå‡å¼€å‘ä½“éªŒã€‚

air æ˜¯ä½¿ç”¨ Go è¯­è¨€ç¼–å†™çš„ä¸€æ¬¾å¼ºå¤§çš„çƒ­é‡è½½å·¥å…·ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ä¾¿æ·ï¼Œåªéœ€è¦ä¸€ä¸ªç®€å•çš„ `air` å‘½ä»¤å³å¯å¯åŠ¨ã€‚air æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤è¡Œå‚æ•°æ¥å¼€å¯æˆ–å…³é—­æŸé¡¹åŠŸèƒ½ã€‚æ¨èä½¿ç”¨ air æ¥çƒ­é‡è½½ä½ çš„ Go åº”ç”¨ç¨‹åºã€‚

æœ¬æ–‡ç¤ºä¾‹æºç æˆ‘éƒ½æ”¾åœ¨äº† [GitHub](https://github.com/jianghushinian/blog-go-example/tree/main/air/fly) ä¸­ï¼Œæ¬¢è¿ç‚¹å‡»æŸ¥çœ‹ã€‚

å¸Œæœ›æ­¤æ–‡èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚

**å»¶ä¼¸é˜…è¯»**

+ air GitHub æºç ï¼š[https://github.com/air-verse/air](https://github.com/air-verse/air)
+ air Documentationï¼š[https://github.com/air-verse/air/blob/master/README-zh_cn.md](https://github.com/air-verse/air/blob/master/README-zh_cn.md)
+ air é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š[https://github.com/air-verse/air/blob/master/air_example.toml](https://github.com/air-verse/air/blob/master/air_example.toml)
+ 06 | é¡¹ç›®åˆå§‹åŒ–ï¼ˆä¸‹ï¼‰ï¼šç»™æ–°é¡¹ç›®æ·»åŠ åˆå§‹æ–‡ä»¶ï¼š[https://articles.zsxq.com/id_0z7eii1hgsp0.html](https://articles.zsxq.com/id_0z7eii1hgsp0.html)
+ æœ¬æ–‡ GitHub ç¤ºä¾‹ä»£ç ï¼š[https://github.com/jianghushinian/blog-go-example/tree/main/air/fly](https://github.com/jianghushinian/blog-go-example/tree/main/air/fly)
+ æœ¬æ–‡æ°¸ä¹…åœ°å€ï¼š[https://jianghushinian.cn/2025/04/03/air/](https://jianghushinian.cn/2025/04/03/air/)

**è”ç³»æˆ‘**

+ å…¬ä¼—å·ï¼š[Goç¼–ç¨‹ä¸–ç•Œ](https://jianghushinian.cn/about)
+ å¾®ä¿¡ï¼šjianghushinian
+ é‚®ç®±ï¼š[jianghushinian007@outlook.com](mailto:jianghushinian007@outlook.com)
+ åšå®¢ï¼š[https://jianghushinian.cn](https://jianghushinian.cn)
+ GitHubï¼š[https://github.com/jianghushinian](https://github.com/jianghushinian)
